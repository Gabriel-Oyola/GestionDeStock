@page "/Productos"

@inject IHttpService http



<h3>ListaProductos</h3> 

<p>Bienvenido al sistema de carga de productos</p> 

<table>
    <tr>
        <th>Codigo</th>
        <th>Nombre        </th> 
        <th>Descripcion   </th> 
        <th>Stock         </th>
    </tr>
@if (productos == null)
    {
        <tr>Cargando...</tr>
    }
    else if (productos.Count == 0)
    {
        <tr>No existen datos</tr>
    }
    else
    {
        @foreach(var item in productos)
        {
          <tr>
              <td>@item.CodigoProducto</td>
              <td>@item.NombreProducto</td>
              <td>@item.DescripcionProducto</td>
              <td>@item.Stock</td>
          </tr> 
        }
    }



</table>

@code {
    List<Producto> productos;

    protected override async Task OnInitializedAsync()
    {
        base.OnInitializedAsync(); 
        await Leer(); 
    }

    private async Task Leer()
    {

        var respuesta = await http.Get<List<Producto>>("api/GestionStock");
        if (!respuesta.Error)
        {
            productos = respuesta.Respuesta;
        }
    }

}
